<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/html">
<head>
    <meta name="viewport"/>
    <title>Flappy Bird</title>
    <! The css of game area is important as position absolute sets the canvas to start in the top left corener of the screen>
    <style>
        #gameArea {
            position: absolute;
            border:1px solid #c15656;
            background-color: #ec1010;
            left: 50%;
            right: 50%;
        }
        #gameCanvas {
            left: 100%;
            right: 100%;
            border:1px solid #d3d3d3;
            background-color: #f1f1f1
        }
    </style>
</head>
<body>
    <! The divs allow the css and javascript to reszie the canvas>
    <div id = "gameArea">

        <canvas id = "gameCanvas"></canvas>
        <script>
            var gameCanvas = document.getElementById('gameCanvas');
            var ctx = gameCanvas.getContext("2d");



            resizeGame();
            function resizeGame() {

                var gameArea = document.getElementById('gameArea');
                var widthToHeight = 16 / 9;
                var newWidth = window.innerWidth - window.innerWidth * .03;
                var newHeight = window.innerHeight - window.innerHeight * .03;
                var newWidthToHeight = newWidth / newHeight;

                //keeps the game's aspect ratio
                if (newWidthToHeight > widthToHeight) {
                    newWidth = newHeight * widthToHeight;
                    gameArea.style.height = newHeight + 'px';
                    gameArea.style.width = newWidth + 'px';
                } else {
                    newHeight = newWidth / widthToHeight;
                    gameArea.style.width = newWidth + 'px';
                    gameArea.style.height = newHeight + 'px';
                }
                //keeps the gameArea in the center of the screen when resizing
                gameArea.style.marginLeft = (-newWidth / 2) + 'px';

                gameCanvas.width = newWidth;
                gameCanvas.height = newHeight;


                var scaleFactorX = gameCanvas.width/480
                var scaleFactorY = gameCanvas.height/270

                ctx.scale(scaleFactorX, scaleFactorY);
            }
            //listens for window resize even
            window.addEventListener('resize', resizeGame, false);
            window.addEventListener('fullscreenchange', resizeGame, false)
            window.addEventListener('orientationchange', resizeGame, false);


            function drawRect () {
                ctx.beginPath();
                ctx.rect(25 , 25 , 100 , 100);
                ctx.fillStyle = "#0095dd";
                ctx.fill();
                ctx.closePath();

            }

            function drawOtherRect() {
                ctx.beginPath();
                ctx.rect(200, 25, 100, 100);
                ctx.fillStyle = "#359b13";
                ctx.fill();
                ctx.closePath();
            }

            function draw() {

                ctx.clearRect(0, 0, gameCanvas.width, gameCanvas.height);

                drawRect();
                drawOtherRect();

                requestAnimationFrame(draw);
            }

            draw();
        </script>
    </div>
</body>
</html>
